<!doctype html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>The Vadi Bar</title>
<link rel="manifest" href="./manifest.webmanifest"><meta name="theme-color" content="#0b0b0b">
<link rel="icon" href="./icons/icon-192.png"><link rel="stylesheet" href="./styles.css">
</head><body>
<header><h1>The Vadi Bar <span style="color:#b7b7b7;font-size:12px">v5.4</span></h1><div class="sub">Per-bottle inventory · Add items by type (kind) · Offline-first</div>
<div class="controls" id="controls">
<input id="q" type="search" placeholder="Search cocktails..." autocomplete="off"/>
<div class="chips" role="group" aria-label="Filters">
<div class="chip" id="chip-liked" aria-pressed="false">Liked</div>
<div class="chip" id="chip-house" aria-pressed="false">House Menu</div>
<div class="chip" id="chip-canmake" aria-pressed="false">Can Make Now</div>
<div class="chip" id="chip-stir" aria-pressed="false">Stir</div>
<div class="chip" id="chip-shake" aria-pressed="false">Shake</div>
</div></div></header>
<main>
<div id="view-cocktails">

<div class="grid" id="grid"></div>
<div class="card" id="cocktail-add-card" style="margin-top:14px">
  <div class="row" style="justify-content:space-between;align-items:center">
    <div>
      <div class="title">Add cocktail by link</div>
      <div class="small" style="margin-top:4px">Paste a Liquor.com link (best), import details, then save.</div>
    </div>
  </div>
  <div class="row" style="margin-top:10px;gap:10px;flex-wrap:wrap">
    <input id="c-import-url" type="url" placeholder="https://www.liquor.com/..." style="flex:1;min-width:220px">
    <button class="btn" id="c-import-btn">Import</button>
    <button class="btn primary" id="c-save-btn" disabled>Save</button>
  </div>
  <div id="c-import-status" class="small" style="margin-top:10px;opacity:.9"></div>
  <div id="c-import-preview" class="small" style="margin-top:10px;display:none"></div>
</div>
<footer id="foot"></footer></div>
<div id="view-inventory" style="display:none">
<div class="sectionTitle">Inventory (each bottle)</div>
<div class="chips" id="inv-filter" style="margin-top:10px"></div>
<div class="chips" id="inv-cattabs" style="margin-top:10px"></div>
<div id="inv-accordions" style="margin-top:10px"></div>
<div class="small">Availability uses the <b>kind</b> (e.g., Gin). If any bottle of that kind is ON, it counts.</div>
<div class="list" id="invlist"></div>
<div style="margin-top:14px" class="card">
<div class="title">Add new item</div>
<div class="row2" style="margin-top:8px">
<div><label class="mini">Category</label>
<select id="add-cat"><option value="spirit">Spirit</option><option value="modifier">Modifier</option><option value="syrup">Syrup</option><option value="pantry">Pantry</option></select></div>
<div><label class="mini">Kind (used by cocktails)</label><input id="add-kind" type="text" placeholder="e.g., Gin / Sweet vermouth / Angostura bitters"></div>
</div>
<div style="margin-top:10px"><label class="mini">Label (your bottle name)</label><input id="add-label" type="text" placeholder="e.g., Tanqueray No. Ten / Carpano Antica"></div>
<div class="btnrow"><button class="btn primary" id="btn-add-item">Add</button><button class="btn" id="btn-scan">Scan barcode</button></div>
<div class="small" id="add-msg" style="margin-top:6px"></div></div>
<div style="margin-top:14px" class="card">
<div class="title">Backup</div><div class="small">Export/import your device changes (inventory + added recipes).</div>
<div class="btnrow"><button class="btn" id="btn-export">Export JSON</button><button class="btn" id="btn-import">Import JSON</button><button class="btn" id="btn-restore-inv">Restore default inventory</button><button class="btn danger" id="btn-reset-inv">Reset inventory on this device</button><input id="file-import" type="file" accept="application/json" style="display:none"></div>
</div></div>
<div id="view-choice" style="display:none">
<div class="sectionTitle">Bartender’s Choice</div><div class="small">Pick a mood.</div>
<div class="btnrow" style="margin-top:12px">
<button class="btn" data-mood="bitter">Bitter & Balanced</button>
<button class="btn" data-mood="strong">Strong & Elegant</button>
<button class="btn" data-mood="smoky">Smoky</button>
<button class="btn" data-mood="fresh">Bright & Fresh</button>
<button class="btn" data-mood="sweet">Sweet but Serious</button>
</div><div style="margin-top:14px" class="grid" id="choicegrid"></div></div>
<div id="view-add" style="display:none">
<div class="sectionTitle">Add a recipe</div><div class="small">Saved on this device (offline).</div>
<div class="card">
<div class="row2"><div><label class="mini">Cocktail name</label><input id="r-name" type="text"></div>
<div class="row2"><div><label class="mini">Glass</label><select id="r-glass"><option value="rocks">Rocks</option><option value="coupe">Coupe</option><option value="mug">Mug</option></select></div>
<div><label class="mini">Method</label><select id="r-method"><option value="stir">Stir</option><option value="shake">Shake</option><option value="shake+float">Shake + Float</option><option value="build">Build</option></select></div></div></div>
<div class="row2" style="margin-top:10px"><div><label class="mini">Liked?</label><select id="r-liked"><option value="true">Yes</option><option value="false">No</option></select></div>
<div><label class="mini">House menu?</label><select id="r-house"><option value="false">No</option><option value="true">Yes</option></select></div></div>
<div style="margin-top:10px"><label class="mini">Garnish</label><input id="r-garnish" type="text"></div>
<div class="row2" style="margin-top:10px"><div><label class="mini">Source label</label><input id="r-source" type="text"></div>
<div><label class="mini">Source URL</label><input id="r-url" type="text"></div></div>
<div style="margin-top:10px"><label class="mini">Notes</label><textarea id="r-notes"></textarea></div>
<fieldset style="margin-top:12px"><legend>Ingredients</legend>
<div class="small">Each line: Ingredient | amount | requires-kind</div>
<textarea id="r-ings"></textarea></fieldset>
<fieldset style="margin-top:12px"><legend>Steps</legend><div class="small">One step per line.</div><textarea id="r-steps"></textarea></fieldset>
<div class="btnrow" style="margin-top:12px"><button class="btn primary" id="r-save">Save recipe</button><button class="btn" id="r-clear">Clear</button></div>
<div class="small" id="r-msg" style="margin-top:8px"></div>
</div></div>

  <section class="view" id="view-wheel" style="display:none">
    <div class="sectionTitle">Wheel of Fortune</div>
    <div class="small" style="margin-top:6px">Spin to get a random surprise cocktail (filters to what you can make).</div>
    <div class="card" style="margin-top:12px">
      <canvas id="wheelCanvas" width="320" height="320" style="width:100%;max-width:340px;display:block;margin:0 auto"></canvas>
      <div class="btnrow" style="margin-top:10px;justify-content:center">
        <button class="btn primary" id="btn-spin">Spin</button>
        <button class="btn" id="btn-wheel-mode">Mode: Can Make</button>
      </div>
      <div id="wheelResult" class="small" style="margin-top:10px;text-align:center"></div>
      <div class="divider" style="margin:14px 0"></div>
      <div class="small" style="text-align:center;margin-bottom:8px">Surprise online: find a new cocktail recipe using what you have.</div>
      <div class="btnrow" style="justify-content:center;flex-wrap:wrap">
        <button class="btn" id="btn-surprise-online">Surprise online</button>
        <select class="miniSelect" id="surprise-source" style="min-width:160px">
          <option value="liquor">Liquor.com (search)</option>
          <option value="google">Google (search)</option>
        </select>
        <select class="miniSelect" id="surprise-mode" style="min-width:160px">
          <option value="spirits">Use spirits only</option>
          <option value="all">Include modifiers</option>
        </select>
      </div>
      <div id="surpriseQuery" class="small" style="margin-top:8px;text-align:center;opacity:.9"></div>
    </div>
  </section>

</main>

<div class="navbar">
  <button class="navbtn active" id="nav-cocktails">Cocktails</button>
  <button class="navbtn" id="nav-inventory">Inventory</button>
  <button class="navbtn" id="nav-wheel">Wheel</button>
  <button class="navbtn" id="nav-choice">Choice</button>
</div>
<dialog id="dlg"><div class="dhead"><div><div class="title" id="dlg-title"></div><div class="meta" id="dlg-meta"></div></div>
<button class="btn" id="dlg-close">Close</button></div>
<div class="dbody"><div class="kv" id="dlg-kv"></div><hr>
<div class="small"><b>Ingredients</b></div><ul id="dlg-ing"></ul><div class="small" id="dlg-missing" style="margin-top:8px"></div><hr>
<div class="small"><b>Method</b></div><ol id="dlg-steps"></ol>
<div class="small" id="dlg-garnish" style="margin-top:10px"></div><div class="small" id="dlg-notes" style="margin-top:8px"></div>
<div class="btnrow"><button class="btn primary" id="btn-make">Start Make Mode</button><button class="btn" id="btn-reset">Reset Checks</button><button class="btn danger" id="btn-del">Delete (if added)</button></div>
<div id="makebox" style="display:none; margin-top:10px"><div class="small"><b>Make Mode</b></div><div class="checklist" id="checklist"></div></div>
<div class="small" style="margin-top:10px">Source: <a id="dlg-src" target="_blank" rel="noreferrer">reference</a></div>
</div></dialog>
<script src="./app.js"></script></body></html>